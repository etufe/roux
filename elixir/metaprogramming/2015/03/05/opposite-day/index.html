<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Opposite Day</title><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=manifest href=/favicon/manifest.json><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=/ms-icon-144x144.png><meta name=theme-color content=#ffffff><link href="http://fonts.googleapis.com/css?family=Amatic+SC" rel=stylesheet type=text/css><!-- <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" /> --><link rel=stylesheet href=/css/main.29c1.css><script src=/js/head-scripts.d1e4.js></script></head><body><!--[if lt IE 8]>
<p class="browsehappy">
  You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.
</p>
<![endif]--><nav id=mini-nav><a class=row href=http://etufe.com>&#9055; Etufe.com</a> <a class=row href=/feed.xml>&#9873; Subscribe</a></nav><header><nav class=container><a id=logo href="/" alt="Etufé Blog"></a> <a id=subscribe href=/feed.xml alt="RSS Feed"><span class=icon>&#9873;</span>SUBSCRIBE</a> <a id=home href=http://etufe.com alt="RSS Feed"><span class=icon>&#9055;</span>Etufe.com</a><div id=mini-nav-btn><div class=stripe></div><div class=stripe></div><div class=stripe></div></div></nav></header><div id=main-column><div class=page-header><h1 class=page-title>Opposite Day</h1><h2 class=page-subtitle>Or how I learned to love the AST.</h2><span class=date><span>Thursday, March 5, 2015</span></span><br><hr></div><article class=post><h2 id=not-acceptable-adult-behaviour>Not acceptable adult behaviour</h2><p>Remember <a href=https://en.wikipedia.org/wiki/Opposite_Day>Oppsite Day</a>? The thought experiment / sibling pestering tool in which the answer to &quot;Is it Opposite Day?&quot; is alway &quot;No&quot; whether or not it is in fact opposite day. It is the enabler of such beautiful playground conundrums as &quot;I&#39;ll trade my pudding for your apple on opposite day.&quot; Well now that we&#39;re older and engaging random people in a good old round of yes-means-no-and-no-means-yes is met with a fear for personal safety, let&#39;s convince the computer to play it with us. Or rather let&#39;s force it to play, like a younger sibling the computer has no say in the matter.</p><h2 id=commanding-the-machine>Commanding the machine</h2><p>In <a href="http://elixir-lang.org/">Elixir</a> we can, if we so dare, control the inner workings of the language through <a href=http://elixir-lang.org/getting-started/meta/macros.html>Macros</a>. The goal of Macros in Elixir is code manipulation and injection. Whenever we call a macro we are giving it access to the raw elixir code that we have written and letting it massage that code into something shiny and new and spit it back into our source. Or in our case relive childhood memories.</p><h2 id=what-the-compiler-sees>What the Compiler Sees</h2><p>When writing code we do it in a way thats convenient for humans, and just before compilation it gets converted to be convenient for computers. In Elixir we can get direct access to this &#39;convenient for computers&#39; structure known as the <a href=https://en.wikipedia.org/wiki/Abstract_syntax_tree>Abstract Syntax Tree</a>, or AST, through the <a href=http://elixir-lang.org/docs/stable/elixir/Kernel.SpecialForms.html#quote/2>quote</a> special form. All we gotta do is pass it a block of code, any syntactically valid Elixir, and it&#39;ll show us what the compiler would see:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=k>quote</span> <span class=k>do</span> <span class=mi>1</span> <span class=o>+</span> <span class=mi>3</span> <span class=k>end</span>
<span class=p>{</span><span class=ss>:+</span><span class=p>,</span> <span class=p>[</span><span class=ss>context</span><span class=p>:</span> <span class=nc>Elixir</span><span class=p>,</span> <span class=ss>import</span><span class=p>:</span> <span class=nc>Kernel</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]}</span>

<span class=o>&gt;</span> <span class=k>quote</span> <span class=k>do</span>
   <span class=n>trade_lunch?</span> <span class=p>=</span> <span class=k>fn</span> <span class=p>(</span><span class=n>mine</span><span class=p>,</span> <span class=n>theirs</span><span class=p>)</span> <span class=p>-&gt;</span>
     <span class=k>if</span> <span class=n>mine</span> <span class=o>&gt;=</span> <span class=n>theirs</span> <span class=k>do</span>
       <span class=no>false</span>
     <span class=k>else</span>
       <span class=no>true</span>
     <span class=k>end</span>
   <span class=k>end</span>
 <span class=k>end</span>
<span class=p>{</span><span class=err>:</span><span class=p>=,</span> <span class=p>[],</span>
 <span class=p>[{</span><span class=ss>:trade_lunch?</span><span class=p>,</span> <span class=p>[],</span> <span class=nc>Elixir</span><span class=p>},</span>
  <span class=p>{</span><span class=ss>:fn</span><span class=p>,</span> <span class=p>[],</span>
   <span class=p>[{</span><span class=ss>:-</span><span class=o>&gt;</span><span class=p>,</span> <span class=p>[],</span>
     <span class=p>[[{</span><span class=ss>:mine</span><span class=p>,</span> <span class=p>[],</span> <span class=nc>Elixir</span><span class=p>},</span> <span class=p>{</span><span class=ss>:theirs</span><span class=p>,</span> <span class=p>[],</span> <span class=nc>Elixir</span><span class=p>}],</span>
      <span class=p>{</span><span class=ss>:if</span><span class=p>,</span> <span class=p>[</span><span class=ss>context</span><span class=p>:</span> <span class=nc>Elixir</span><span class=p>,</span> <span class=ss>import</span><span class=p>:</span> <span class=nc>Kernel</span><span class=p>],</span>
       <span class=p>[{</span><span class=ss>:&gt;=</span><span class=p>,</span> <span class=p>[</span><span class=ss>context</span><span class=p>:</span> <span class=nc>Elixir</span><span class=p>,</span> <span class=ss>import</span><span class=p>:</span> <span class=nc>Kernel</span><span class=p>],</span>
         <span class=p>[{</span><span class=ss>:mine</span><span class=p>,</span> <span class=p>[],</span> <span class=nc>Elixir</span><span class=p>},</span> <span class=p>{</span><span class=ss>:theirs</span><span class=p>,</span> <span class=p>[],</span> <span class=nc>Elixir</span><span class=p>}]},</span>
        <span class=p>[</span><span class=ss>do</span><span class=p>:</span> <span class=no>false</span><span class=p>,</span> <span class=ss>else</span><span class=p>:</span> <span class=no>true</span><span class=p>]]}]}]}]}</span></code></pre></div><p>That first one looks pretty manageable, we see the <code>+</code> sign and the variables we gave it. There&#39;s some crap in the middle but who cares about that? The second one though, looks like just enough brackets to make me stop right here and give up on the whole metaprogramming craze; leave it to the kids with their pokémon. With just a tiny bit more scrutiny, though, we see that this massive pile of not-my-programming-language that <code>quote</code> gave back to us is admittedly just a neatly nested structure of <code>{function, context, arguments}</code>. Also that all the pieces are just normal elixir waiting for us to get our grubby hands on.</p><h2 id=grubby-little-hands>Grubby little hands</h2><p>Let&#39;s get dirty, we&#39;ll call this file <code>opposite_day.ex</code>:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=lineno>1</span> <span class=kd>defmodule</span> <span class=nc>OppositeDay</span> <span class=k>do</span>
<span class=lineno>2</span>   <span class=kd>defmacro</span> <span class=n>opposite_day</span><span class=p>(</span><span class=ss>do</span><span class=p>:</span> <span class=n>block</span><span class=p>)</span> <span class=k>do</span>
<span class=lineno>3</span>     <span class=nc>IO</span><span class=p>.</span><span class=n>inspect</span> <span class=n>block</span>
<span class=lineno>4</span>   <span class=k>end</span>
<span class=lineno>5</span> <span class=k>end</span></code></pre></div><p>and in iex we can:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=n>c</span> <span class=s2>&quot;opposite_day.ex&quot;</span>
<span class=o>&gt;</span> <span class=kn>import</span> <span class=nc>OppositeDay</span>
<span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span> <span class=mi>1</span> <span class=o>+</span> <span class=mi>3</span> <span class=k>end</span>
<span class=p>{</span><span class=ss>:+</span><span class=p>,</span> <span class=p>[</span><span class=ss>line</span><span class=p>:</span> <span class=mi>15</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]}</span>
<span class=mi>4</span></code></pre></div><p><strong>Woah</strong> we&#39;re in the matrix. The first line of output is the AST of the expression we passed to <code>OppositeDay.opposite_day</code>. We didn&#39;t have to quote it ourselves because macros receive their arguments already quoted. The next line of output is the result of the expression we passed. IO.inspect prints it&#39;s argument but also returns it unchanged which means that our little macro injected the exact AST it got and then iex ran it like normal. Let&#39;s get straight to business and make yes mean no.</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=lineno>1</span> <span class=kd>defmodule</span> <span class=nc>OppositeDay</span> <span class=k>do</span>
<span class=lineno>2</span>   <span class=kd>defmacro</span> <span class=n>opposite_day</span><span class=p>(</span><span class=ss>do</span><span class=p>:</span> <span class=n>block</span><span class=p>)</span> <span class=k>do</span>
<span class=lineno>3</span>     <span class=n>do_opposite</span><span class=p>(</span><span class=n>block</span><span class=p>)</span>
<span class=lineno>4</span>   <span class=k>end</span>
<span class=lineno>5</span> 
<span class=lineno>6</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:==</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>})</span> <span class=k>do</span>
<span class=lineno>7</span>     <span class=p>{</span><span class=ss>:!=</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>}</span>
<span class=lineno>8</span>   <span class=k>end</span>
<span class=lineno>9</span> <span class=k>end</span></code></pre></div><p>iex:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=n>c</span> <span class=s2>&quot;opposite_day.ex&quot;</span>
<span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span> <span class=mi>2</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>4</span> <span class=k>end</span>
<span class=no>false</span></code></pre></div><p><em>Ahahaha</em> we are masters of the universe! We&#39;ve bent elixir to our will and it feels good. Let&#39;s try some more:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span> <span class=mi>9</span> <span class=o>*</span> <span class=mi>3</span> <span class=o>==</span> <span class=mi>27</span> <span class=k>end</span>
<span class=no>false</span>
<span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span>
    <span class=mi>5</span> <span class=o>==</span> <span class=mi>13</span> <span class=o>-</span> <span class=mi>8</span>
    <span class=mi>144</span> <span class=p>=</span> <span class=mi>12</span> <span class=o>*</span> <span class=mi>12</span>
  <span class=k>end</span>
<span class=o>**</span> <span class=p>(</span><span class=nc>FunctionClauseError</span><span class=p>)</span> <span class=n>no</span> <span class=n>function</span> <span class=n>clause</span> <span class=n>matching</span> <span class=ow>in</span>
<span class=nc>OppositeDay</span><span class=p>.</span><span class=n>do_opposite</span><span class=p>(</span><span class=ss>:__block__</span> <span class=p>...</span></code></pre></div><p>Ah crap, ok so if we pass it more than one expression the whole thing gets wrapped in a <code>{:__block__, context, arguments}</code> tuple. Let&#39;s account for that generically by saying, if we get anything we don&#39;t care about pass it through unchanged and check it&#39;s arguments. Since the arguments are in a list we&#39;ll just enumerate over them:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=lineno> 1</span> <span class=kd>defmodule</span> <span class=nc>OppositeDay</span> <span class=k>do</span>
<span class=lineno> 2</span>   <span class=kd>defmacro</span> <span class=n>opposite_day</span><span class=p>(</span><span class=ss>do</span><span class=p>:</span> <span class=n>block</span><span class=p>)</span> <span class=k>do</span>
<span class=lineno> 3</span>     <span class=n>do_opposite</span><span class=p>(</span><span class=n>block</span><span class=p>)</span>
<span class=lineno> 4</span>   <span class=k>end</span>
<span class=lineno> 5</span> 
<span class=lineno> 6</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:==</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>})</span> <span class=k>do</span>
<span class=lineno> 7</span>     <span class=p>{</span><span class=ss>:!=</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>}</span>
<span class=lineno> 8</span>   <span class=k>end</span>
<span class=lineno> 9</span> 
<span class=lineno>10</span>   <span class=c1># If we don&#39;t care about the function, check the arguments</span>
<span class=lineno>11</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=n>function</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>})</span> <span class=k>do</span>
<span class=lineno>12</span>     <span class=p>{</span><span class=n>function</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>arguments</span><span class=p>)}</span>
<span class=lineno>13</span>   <span class=k>end</span>
<span class=lineno>14</span> 
<span class=lineno>15</span>   <span class=c1># If the arguments is a list, check each item</span>
<span class=lineno>16</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>arguments</span><span class=p>)</span> <span class=ow>when</span> <span class=n>is_list</span> <span class=n>arguments</span> <span class=k>do</span>
<span class=lineno>17</span>     <span class=k>for</span> <span class=n>statement</span> <span class=p>&lt;-</span> <span class=n>arguments</span><span class=p>,</span> <span class=ss>do</span><span class=p>:</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>statement</span><span class=p>)</span>
<span class=lineno>18</span>   <span class=k>end</span>
<span class=lineno>19</span>   
<span class=lineno>20</span>   <span class=c1># if it&#39;s something else entirely, just pass it on through</span>
<span class=lineno>21</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=ss>do</span><span class=p>:</span> <span class=n>x</span>
<span class=lineno>22</span> <span class=k>end</span></code></pre></div><p>iex:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=n>c</span> <span class=s2>&quot;opposite_day.ex&quot;</span>
<span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span> 
    <span class=nc>IO</span><span class=p>.</span><span class=n>inspect</span> <span class=mi>2</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>4</span>
    <span class=nc>IO</span><span class=p>.</span><span class=n>inspect</span> <span class=mi>144</span> <span class=o>==</span> <span class=mi>12</span> <span class=o>*</span> <span class=mi>12</span>
  <span class=k>end</span>
<span class=no>false</span>
<span class=no>false</span></code></pre></div><h2 id=so-close-and-too-young-for-cigars>So Close and Too Young for Cigars</h2><p>Awesome, we&#39;re back in business! Lets add some more opposites to complete the game:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=lineno> 1</span> <span class=kd>defmodule</span> <span class=nc>OppositeDay</span> <span class=k>do</span>
<span class=lineno> 2</span>   <span class=kd>defmacro</span> <span class=n>opposite_day</span><span class=p>(</span><span class=ss>do</span><span class=p>:</span> <span class=n>block</span><span class=p>)</span> <span class=k>do</span>
<span class=lineno> 3</span>     <span class=n>do_opposite</span><span class=p>(</span><span class=n>block</span><span class=p>)</span>
<span class=lineno> 4</span>   <span class=k>end</span>
<span class=lineno> 5</span> 
<span class=lineno> 6</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:==</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:!=</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno> 7</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:!=</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:==</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno> 8</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:-</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:+</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno> 9</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:+</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:-</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno>10</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:*</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:/</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno>11</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:/</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:*</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno>12</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:&lt;</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:&gt;</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno>13</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=ss>:&gt;</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}),</span> <span class=ss>do</span><span class=p>:</span> <span class=p>{</span><span class=ss>:&lt;</span><span class=p>,</span>  <span class=n>c</span><span class=p>,</span> <span class=n>a</span><span class=p>}</span>
<span class=lineno>14</span> 
<span class=lineno>15</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>({</span><span class=n>function</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>arguments</span><span class=p>})</span> <span class=k>do</span>
<span class=lineno>16</span>    <span class=p>{</span><span class=n>function</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>arguments</span><span class=p>)}</span>
<span class=lineno>17</span>   <span class=k>end</span>
<span class=lineno>18</span> 
<span class=lineno>19</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>arguments</span><span class=p>)</span> <span class=ow>when</span> <span class=n>is_list</span> <span class=n>arguments</span> <span class=k>do</span>
<span class=lineno>20</span>    <span class=k>for</span> <span class=n>statement</span> <span class=p>&lt;-</span> <span class=n>arguments</span><span class=p>,</span> <span class=ss>do</span><span class=p>:</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>statement</span><span class=p>)</span>
<span class=lineno>21</span>   <span class=k>end</span>
<span class=lineno>22</span> 
<span class=lineno>23</span>   <span class=kd>def</span> <span class=n>do_opposite</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=ss>do</span><span class=p>:</span> <span class=n>x</span>
<span class=lineno>24</span> <span class=k>end</span></code></pre></div><p>iex:</p><div class=highlight><pre><code class=language-elixir data-lang=elixir><span class=o>&gt;</span> <span class=n>c</span> <span class=s2>&quot;opposite_day.ex&quot;</span>
<span class=o>&gt;</span> <span class=n>opposite_day</span> <span class=k>do</span>
    <span class=nc>IO</span><span class=p>.</span><span class=n>puts</span> <span class=mi>13</span> <span class=o>*</span> <span class=mi>3</span>
    <span class=nc>IO</span><span class=p>.</span><span class=n>puts</span> <span class=mi>42</span> <span class=o>+</span> <span class=mi>15</span>
    <span class=nc>IO</span><span class=p>.</span><span class=n>puts</span> <span class=s2>&quot;homework&quot;</span> <span class=o>==</span> <span class=s2>&quot;cool&quot;</span>
    <span class=n>i_totally_wanna_trade_snacks</span> <span class=p>=</span> <span class=k>fn</span> <span class=p>-&gt;</span> <span class=no>true</span> <span class=k>end</span>
    <span class=nc>IO</span><span class=p>.</span><span class=n>puts</span> <span class=n>i_totally_wanna_trade_snacks</span><span class=p>.()</span> <span class=o>==</span> <span class=no>true</span>
  <span class=k>end</span>
<span class=mf>4.333333333333333</span>
<span class=mi>27</span>
<span class=no>true</span>
<span class=no>false</span></code></pre></div><h2 id=king-of-the-sarcastic-playground>King of the Sarcastic Playground</h2><p>We&#39;ve done it! With just those 20ish lines of code we re-wrote a bunch of Elixir&#39;s built in operators to give us maximum leverage of our sarcastic power. On a more useful note, this basic behaviour is exactly what macros are all about. Grabbing some AST, massaging about the tid-bits you need and plopping it right back in the source. Don&#39;t listen to anyones warnings. Metaprogram the be-jesus out of your code until you&#39;ve got no more cheek space left for grinning. It&#39;s an awesome way to get better at programming and it&#39;s a barrel full of fun to boot.<br>&#9876;</p><!-- refs --></article><div class=page-footer><h4>Another fine kettle of fish from the good folks at <i>Etufé</i>.</h4></div></div><footer><a href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA-4.0</a> 2015 &#9884; Etufé</footer><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.787e.js></script><!--% include googleanalytics.html %}--></body></html>